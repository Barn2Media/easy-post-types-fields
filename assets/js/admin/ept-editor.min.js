/*!
 * Easy Post Types and Fields 0.2
 * Copyright 2022 Barn2 Plugins
 */
((e,t,n,a)=>{e((()=>{const __=t.i18n.__;e("#ept_plural_name_wrap label").removeClass("screen-reader-text"),e("#ept_plural_name_wrap input").on("input",(t=>{""!==t.target.value?e("#ept_plural_name_wrap label").addClass("screen-reader-text"):e("#ept_plural_name_wrap label").removeClass("screen-reader-text")})).trigger("input"),e(".post_type-name .row-actions .delete a").on("click",(e=>{if(!confirm(n.i18n.confirm_delete))return e.preventDefault(),!1;Number(e.target.dataset.post_count)>0&&!confirm(n.i18n.last_confirm_delete)&&e.preventDefault()})),e(document).on("click","#the-list tr a.editinline, tfoot tr button.editinline",(t=>{t.preventDefault();const n=e(t.target).closest("table"),a=e("#the-list tr.no-items",n),i=e("#inlineedit tr#inline-edit").clone();let r=a,s=!0;var l,o;0===a.length&&(r=e("#the-list tr").last(),s=!1),"A"===t.target.tagName&&(r=e(t.target).closest("tr"),s=!0,l=i,e(".hidden>div",o=r).each(((t,n)=>{const a=e(n),i=e(`input[name="${a.attr("class")}"]`,l);"checkbox"===i.attr("type")?i.prop("checked","true"===a.text()):i.val(a.text())})),e('input[name="previous_slug"]',l).val(e(".hidden>div.slug",o).text())),r.toggle(!s).after(s?e("<tr>",{class:"hidden"}):null,i.show()).addClass("editing"),e("tfoot",n).hide()})),e(document).on("click","#the-list .inline-edit-save button.cancel",(t=>{const n=e(t.target).closest("table"),a=e("#the-list tr.no-items",n),i=e("#the-list tr.editing",n);e("#the-list tr#inline-edit").prev(".hidden").remove().end().remove(),e("tfoot",n).show(),i.show().removeClass("editing"),1===e("tbody tr",n).length&&a.show()})),e(document).on("click","#the-list .inline-edit-save button.save",(n=>{const a=e(n.target).closest("table"),i=e("#the-list tr.no-items",a),r=e("#the-list tr.editing",a),s=e("#the-list tr#inline-edit");var l;(l=s,new Promise(((t,n)=>{const a={action:"ept_inline_edit",nonce:e("#_inline_edit",l).val()};e("input",l).each(((t,n)=>{const i=e(n);let r=i.val();"checkbox"===i.attr("type")&&(r=i.prop("checked")),a[e(n).attr("name")]=r})),e(".spinner",l).addClass("is-active"),e.post(ajaxurl,e.param(a),(a=>{e(".spinner",l).removeClass("is-active"),a.success?t():n(a.data.error_message)}))}))).then((()=>{((t,n)=>{e("input",n).each(((n,a)=>{const i=e(a),r=e(`.hidden>div.${i.attr("name")}`,t);let s=i.val();"checkbox"===i.attr("type")?(r.text(i.prop("checked")?"true":"false"),s=i.prop("checked")?__("Yes","easy-post-types-fields"):__("No","easy-post-types-fields")):r.text(i.val());let l=`td.column-${i.attr("name")}`;"singular_name"===i.attr("name")&&(l+=" a.row-title"),e(l,t).text(s)}))})(r,s),s.prev(".hidden").remove().end().remove(),e("tfoot",a).show(),r.show().removeClass("editing"),1===e("tbody tr",a).length&&i.show()}),(n=>{const a=e("#the-list .inline-edit-save .notice-error"),i=e(".error",a);a.removeClass("hidden"),i.text(n),t.a11y.speak(n)}))})),e.fn.tipTip&&e(".barn2-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200,keepAlive:!0})}))})(jQuery,wp,ept_params);