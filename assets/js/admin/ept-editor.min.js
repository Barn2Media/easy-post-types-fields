/*!
 * Easy Post Types and Fields 0.2
 * Copyright 2022 Barn2 Plugins
 */
((e,t,a,n)=>{e((()=>{const __=t.i18n.__;e("#ept_plural_name_wrap label").removeClass("screen-reader-text"),e("#ept_plural_name_wrap input").on("input",(t=>{""!==t.target.value?e("#ept_plural_name_wrap label").addClass("screen-reader-text"):e("#ept_plural_name_wrap label").removeClass("screen-reader-text")})).trigger("input"),e(".post_type-name .row-actions .delete a").on("click",(e=>{if(!confirm(a.i18n.confirm_delete))return e.preventDefault(),!1;Number(e.target.dataset.post_count)>0&&!confirm(a.i18n.last_confirm_delete)&&e.preventDefault()})),e(document).on("click","#the-list tr .delete a",(a=>{a.preventDefault();const n=e(a.target).closest("table"),s=e(a.target).closest("tr"),i=e("a.row-title",s).text(),l=e("td.column-slug",s).text();if(!confirm(t.i18n.sprintf(t.i18n.__("Are you sure you want to delete the %1$s %2$s?","easy-post-types-fields"),i,t.i18n.__("taxonomy","easy-post-types-fields"))))return!1;const r={action:"ept_inline_delete",_inline_delete:e("#_inline_delete",n).val(),slug:l,type:"taxonomy",post_type:new URLSearchParams(location.search).get("post_type")};e.post(ajaxurl,e.param(r),(e=>{e.success&&(s.remove(),location.reload())}))})),e(document).on("click","#the-list tr a.editinline, tfoot tr button.editinline",(t=>{t.preventDefault();const a=e(t.target).closest("table"),n=e("#the-list tr.no-items",a),s=e("#inlineedit tr#inline-edit").clone();let i=n,l=!0;var r,o;0===n.length&&(i=e("#the-list tr").last(),l=!1),"A"===t.target.tagName&&(i=e(t.target).closest("tr"),l=!0,r=s,e(".hidden>div",o=i).each(((t,a)=>{const n=e(a),s=e(`input[name="${n.attr("class")}"]`,r);"checkbox"===s.attr("type")?s.prop("checked","true"===n.text()):s.val(n.text())})),e('input[name="previous_slug"]',r).val(e(".hidden>div.slug",o).text())),i.toggle(!l).after(l?e("<tr>",{class:"hidden"}):null,s.show()).addClass("editing"),e("tfoot",a).hide()})),e(document).on("click","#the-list .inline-edit-save button.cancel",(t=>{const a=e(t.target).closest("table"),n=e("#the-list tr.no-items",a),s=e("#the-list tr.editing",a);e("#the-list tr#inline-edit").prev(".hidden").remove().end().remove(),e("tfoot",a).show(),s.show().removeClass("editing"),1===e("tbody tr",a).length&&n.show()})),e(document).on("click","#the-list .inline-edit-save button.save",(a=>{const n=e(a.target).closest("table"),s=e("#the-list tr.no-items",n),i=e("#the-list tr.editing",n),l=e("#the-list tr#inline-edit");var r;(r=l,new Promise(((t,a)=>{const n={action:"ept_inline_edit"};e("input",r).each(((t,a)=>{const s=e(a);let i=s.val();"checkbox"===s.attr("type")&&(i=s.prop("checked")),n[e(a).attr("name")]=i})),e(".spinner",r).addClass("is-active"),e.post(ajaxurl,e.param(n),(s=>{e(".spinner",r).removeClass("is-active"),s.success?t(!n.previous_slug):a(s.data.error_message)}))}))).then((t=>{t?location.reload():(((t,a)=>{e("input",a).each(((a,n)=>{const s=e(n),i=e(`.hidden>div.${s.attr("name")}`,t);let l=s.val();"checkbox"===s.attr("type")?(i.text(s.prop("checked")?"true":"false"),l=s.prop("checked")?__("Yes","easy-post-types-fields"):__("No","easy-post-types-fields")):i.text(s.val());let r=`td.column-${s.attr("name")}`;"singular_name"===s.attr("name")&&(r+=" a.row-title"),e(r,t).text(l)}))})(i,l),l.prev(".hidden").remove().end().remove(),e("tfoot",n).show(),i.show().removeClass("editing"),1===e("tbody tr",n).length&&s.show())}),(a=>{const n=e("#the-list .inline-edit-save .notice-error"),s=e(".error",n);n.removeClass("hidden"),s.text(a),t.a11y.speak(a)}))})),e.fn.tipTip&&e(".barn2-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200,keepAlive:!0})}))})(jQuery,wp,ept_params);